function keyPressed(){83===keyCode&&saveCanvas(__canvas,"mesh-"+tokenData.hash,"jpg")}let __canvas,SCALE,bgType,colorPalette,showStar2,showStar3,showCircles,star1MiddleLine,star2MiddleLine,star3MiddleLine,star1XOff,star1YOff,star2XOff,star2YOff,star3XOff,star3YOff,star1Scale,star2Scale,star3Scale,star1W,star2W,star3W,star1Points,star2Points,star3Points,xShadow,yShadow,bgC,bgStrokeC,shadowC,borderC,lineC,middleLineC;function setup(){const t=min(window.innerWidth,window.innerHeight);__canvas=createCanvas(t,t),SCALE=t/500;const r=hshrnd(0);bgType=r<.5?"matrix":r<.9375?"stipple":"";const e=hshrnd(1);colorPalette=e<.125?"bw":"color",showStar2=hshrnd(2)<.5,showStar3=hshrnd(3)<.125,showCircles=hshrnd(4)<.0625,star1MiddleLine=hshrnd(5)<.5,star2MiddleLine=hshrnd(6)<.5,star3MiddleLine=hshrnd(7)<.5,star1XOff=rnd(-500,500),star1YOff=rnd(-500,500),star2XOff=rnd(-500,500),star2YOff=rnd(-500,500),star3XOff=rnd(-500,500),star3YOff=rnd(-500,500),star1Scale=rnd(.2,5),star2Scale=rnd(.2,5),star3Scale=rnd(.2,5),star1W=rnd(2,17),star2W=star1W<10?rnd(2,17):rnd(star1W/2),star3W=star1W<10?rnd(2,17):rnd(star1W/2),star1Points=int(rnd(30,60)),star2Points=int(rnd(30,60)),star3Points=int(rnd(30,60)),xShadow=3*posOrNeg(),yShadow=3*posOrNeg(),colorMode(HSB,360,1,1),setColors(),noLoop(),console.log(tokenData.hash)}const posOrNeg=()=>rnd()<.5?1:-1;function draw(){noFill(),translate(width/2,height/2),scale(SCALE),drawBg(),multiMultiStar(star1XOff,star1YOff,star1Points,star1W,star1Scale,star1MiddleLine),showStar2&&multiMultiStar(star2XOff,star2YOff,star2Points,star2W,star2Scale,star2MiddleLine),showStar3&&multiMultiStar(star3XOff,star3YOff,star3Points,star3W,star3Scale,star3MiddleLine)}function multiMultiStar(t,r,e,s,a,n){push(),scale(a);const o=showCircles?1.2*s:0;strokeWeight(s),stroke(shadowC),multiStar(t+xShadow,r+yShadow,e,o),stroke(borderC),multiStar(t,r,e,o),strokeWeight(s-2),stroke(lineC),multiStar(t,r,e,o),strokeWeight(.1*s),stroke(middleLineC),n&&multiStar(t,r,e),pop()}function multiStar(t,r,e,s){for(let a=3;a<80;a++)star1(t,r,20*a,e,20,.6*a,s)}function star1(t,r,e,s,a,n,o){const l=o=>{const l=o%2==0?e-a:e,d=TWO_PI/s;return[sin(d*o+n)*l+t,cos(d*o+n)*l+r]};beginShape(),curveVertex(...l(s-1));for(let t=0;t<=s+1;t++){const[r,e]=l(t);o&&circle(r,e,o),curveVertex(r,e)}endShape()}const sample=(t,r)=>{const e=t[int(rnd(0,t.length))];return e===r?sample(t,r):e};function setColors(){const t=[{c:color(0,0,1),type:"l"},{c:color(150,.55,.95),type:"l"},{c:color(200,.55,1),type:"l"},{c:color(90,.7,.95),type:"l"}],r=[{c:color(0,.75,1),type:"m"},{c:color(25,.9,.95),type:"m"}],e=[{c:color(0,0,0),type:"d"},{c:color(250,.72,.31),type:"d"}],s=[...t,...r,...e],a=[t[0].c,e[0].c,color(0,0,.5)],n=s=>"l"===s.type?sample([...r,...e]):"m"===s.type?sample([...t,...e]):sample([...t,...r]);if("bw"===colorPalette)bgC=sample(a),bgStrokeC=sample(a,bgC),shadowC=sample(a),borderC=sample(a,bgC),lineC=sample(a,borderC),middleLineC=sample(a,lineC);else{const t=sample(s),r=sample(s);bgC=t.c,bgStrokeC=n(t).c,shadowC=sample(s).c,borderC=n(t).c,lineC=r.c,middleLineC=n(r).c}}function drawBg(){push(),background(bgC),stroke(bgStrokeC);const t=width/SCALE,r=height/SCALE;"matrix"===bgType?matrixBg(t,r):"stipple"===bgType&&stippleBg(t,r),pop()}function stippleBg(t,r){const e=int(rnd(-2,0,2)),s=int(rnd(-2,0,2));for(let a=0;a<t+1;a+=5)for(let n=0;n<r+1;n+=5){circle(a-t/2,n-r/2,1+4*((e>0?a/t:1-a/t)*e+(s>0?n/r:1-n/r)*s))}}const mult=()=>rnd(1,25);function matrixBg(t,r){const e=mult(),s=mult(),a=mult(),n=mult();for(let a=-t;a<t+1;a+=5)line(a*e,-r/2,a*s,r/2);for(let e=-r;e<r+1;e+=5)line(-t/2,e*a,t/2,e*n)}let __randomSeed=parseInt(tokenData.hash.slice(0,16),16);function rnd(t,r){__randomSeed^=__randomSeed<<13,__randomSeed^=__randomSeed>>17;const e=((__randomSeed^=__randomSeed<<5)<0?1+~__randomSeed:__randomSeed)%1e3/1e3;return null!=r?t+e*(r-t):null!=t?e*t:e}function hshrnd(t){const r=tokenData.hash.slice(2+t,3+t);return parseInt(r,16)/16}
